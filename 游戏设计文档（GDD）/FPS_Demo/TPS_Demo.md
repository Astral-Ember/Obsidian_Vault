代码文件对照表


## TPS_Demo 主要代码文件对照表

| 序号  | 文件(夹)                                           | 主要功能                                              | 关键类/函数                                                                | 技术亮点 & 可写简历卖点                                                                                                                                                                                |
| --- | ----------------------------------------------- | ------------------------------------------------- | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | Source/TPS_Demo/Character/TPSCharacter.h / .cpp | 游戏主角（第三人称）逻辑：移动、视角、跑跳蹲、瞄准、拾取/切换/卸下武器、攻击、换弹等完整输入链路 | ATPSCharacter<br>核心回调：MoveInput、AimStartInput、CustomCrouch、StateCheck | • UE5 Enhanced Input 全映射驱动，支持触发/持续/完成三态<br>• Timeline + 曲线驱动平滑蹲起，避免瞬移<br>• 动态挂接武器 Socket，实现主/副/背包三态可视化切换<br>• 统一状态机 StateCheck 调速：行走/跑步/瞄准/下蹲一行代码切换                                          |
| 2   | Source/TPS_Demo/Weapon/Weapon.h / .cpp          | 武器基类：射击、瞄准、换弹、弹药管理、快慢机模式、弹道计算                     | AWeapon<br>关键函数：StartAttack、DoFire、Reload、PerformLineTrace            | • 数据-驱动：UWeaponDataAsset 一键换表，策划零代码调参<br>• RPM→秒自动换算，Timer 驱动全自动射击<br>• VRandCone + Hip/Aim 双散布，贴近真实射击体验<br>• 多段 LineTrace（摄像机遮挡 ➜ 枪口真实弹道）解决“穿墙打人”问题<br>• Timeline + FCurve 实现 ADS(FOV) 平滑缩放 |
| 3   | Source/TPS_Demo/Data/WeaponDataAsset.h / .cpp   | 武器静态配置表（伤害、射速、弹匣、资源引用等）                           | UWeaponDataAsset                                                      | • 充分利用 UE PrimaryDataAsset，热更新、不重启即可改数值<br>• 区分「静态配置」与「运行时状态」的DDD理念                                                                                                                          |
| 4   | Source/TPS_Demo/StateComponent.h / .cpp         | 角色生命值&受击系统（可复用）                                   | UStateComponent、OnDamageTaken                                         | • 把生命/伤害做成 ActorComponent，任意 Actor 插件式复用<br>• 通过 AActor::OnTakeAnyDamage 原生委托无侵入接管伤害                                                                                                         |
| 5   | Source/TPS_Demo/TPSStateBase.h / .cpp           | 游戏全局状态：死亡事件广播                                     | ATPSStateBase、FOnActorDeath                                           | • DECLARE_DYNAMIC_MULTICAST_DELEGATE 架构，蓝图/代码双端监听<br>• 解耦死亡 UI 提示、统计等多系统                                                                                                                     |
| 6   | Source/TPS_Demo/UIWidget.h / .cpp               | HUD：弹药计数、武器图标、杀敌提示                                | UUIWidget、ShowDeathNotification                                       | • BindWidget 无需蓝图绑定，C++ 直连 UMG 控件<br>• 监听 OnActorDeath → 3 秒自动隐藏提示，Timer 统一管理                                                                                                                |
| 7   | Source/TPS_Demo/TPSController.h / .cpp          | 玩家控制器：默认映射上下文注入                                   | ATPSController                                                        | • Runtime 动态添加 UInputMappingContext，支持外设热插拔                                                                                                                                                  |
| 8   | Source/TPS_Demo/TPSModeBase.h / .cpp            | GameMode 基础类，启动时初始化全局系统                           | ATPSModeBase                                                          | • 独立 GameMode 方便后续接入多人或 PVE 规则                                                                                                                                                               |
| 9   | Source/TPS_Demo/StateComponent.cpp (单独列出)       | 实现生命&伤害逻辑                                         | —                                                                     | • 在 BeginPlay 里注册 OnTakeAnyDamage，简洁高 cohesion                                                                                                                                               |
| 10  | 其他辅助文件                                          | 工程入口、Target、模块声明等                                 | TPS_Demo.cpp / .h 等                                                   | —                                                                                                                                                                                            |