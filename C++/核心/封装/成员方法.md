成员方法

1. 成员方法的声明和定义
2. 成员方法的使用
3. 内联成员方法
4. 头文件中的防止重复编译命令

基本概念  
成员方法（函数） 用来表现对象行为

1. 声明在类语句块中
2. 是用来描述对象的行为的
3. 规则与函数声明规则相同
4. 受到访问修饰符规则影响
5. 返回值等不做限制
6. 方法数量不做限制
7. 定义位置有几种选择

方式一：  
在类内声明并定义（小型函数、极短的构造函数）  
方式二：  
在 .h 内声明，在 .cpp 中定义（推荐使用该方法）  
.cpp

|   |
|---|
|#include "Person.h"  <br>#include \<iostream\>  <br>using namespace std;  <br>bool Person::IsAdult()  <br>{  <br>return age \>= 18;  <br>}  <br>void Person::Speak(string str)  <br>{  <br>cout \<\< str \<\< "is speaking" \<\< '\n';  <br>}  <br>void Person::AddFriend(Person* p)  <br>{<br><br>  <br><br>}  <br>void Person::ShowFriends()  <br>{<br><br>  <br><br>}  <br>int main()  <br>{<br><br>  <br><br>}|

.h

|   |
|---|
|#pragma once  <br>#include\<iostream\>  <br>#include \<string\>  <br>#include "Pet.h"  <br>using namespace std;<br><br>  <br><br>class Person  <br>{  <br>public:  <br>int age = 0;  <br>string name;  <br>Person* friends[10] = { nullptr };  <br>bool IsAdult();  <br>void Speak(string str);  <br>void AddFriend(Person* p);  <br>void ShowFriends();  <br>};|

|   |
|---|
|//栈上  <br>Person p;  <br>p.name = "Tom";  <br>p.age = 18;  <br>if (p.IsAdult())  <br>cout \<\< p.name \<\< "is adult" \<\< '\n';  <br>else  <br>cout \<\< p.name \<\< "is not adult" \<\< '\n';  <br>//堆上  <br>Person*p1 = new Person();  <br>p1-\>name = "Jerry";  <br>p1-\>age = 16;  <br>if (p1-\>IsAdult())  <br>cout \<\< p1-\>name \<\< "is adult" \<\< '\n';  <br>else  <br>cout \<\< p1-\>name \<\< "is not adult" \<\< '\n';  <br>delete p1;  <br>p1 = nullptr;|

在类中将成员方法变成内联函数的作用和外部一样  
内联函数回顾：  
使用 inline 关键字对函数进行声明或定义  
主要作用是告诉编译器，在调用该函数时，将函数的代码直接插入到调用方的位置  
而不是执行常规的函数调用过程。
 
这样做的目的是减少函数调用的开销  
适用于哪些小型的、频繁调用的函数
 
注意：  
直接在类内定义的成员方法，默认为是内联的  
也就是我们在知识点中讲解的方式一定义函数的方式  
当我们在类外定义成员方法时，可以显式地加上 inline 关键字让其成为内联函数  
但在使用时需要特别注意：  
是否真正内联是由编译器决定的，inline 只是建议  
内联函数不能过大，否则可能导致代码膨胀  
内联函数不适用于递归函数，或复杂的逻辑  
虚函数不能是内联
 
什么是头文件重复编译  
头文件可能会被多个源文件（.cpp）或同一个源文件间接多次包含  
如果没有适当的防护机制，会导致编译错误（一般会重定义的错误）  
C++中为了防止重复编译 提供了 2 种方式
 
使用传统宏定义来防止头文件重复编译  
#ifndef 自定义宏名 // 如果没有定义 自定义宏名  
#define 自定义宏名 // 定义 自定义宏名  
#endif // 结束条件编译
 
使用更加简便的 pragma 指令来防止重复编译

![Exported image](Exported%20image%2020251125140149-0.png)