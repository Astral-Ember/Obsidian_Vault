友元函数

1. 什么是友元
2. 友元函数的概念
3. 友元函数的使用
4. 友元函数传参的几种方式
5. 总结

友元是 C++ 中的一个关键字： friend(朋友)  
使用友元机制允许  
我们在外部访问某个类的  
私有(private)或保护(protected)的成员
 
从封装性的角度来看，私有和保护的成员不应该被外部访问问到  
因此友元它一定程度上破坏了封装性，需要谨慎使用
 
友元函数是一个普通函数 虽然需要在类中声明 但是它不属于类的成员  
通过友元 函数可以访问目标类的private和protected成员  
规则  
友元函数必须声明在目标类内部  
需要在函数前面加上friend关键字  
友元函数一般会有一个参数 参数类型为目标类对象（因为友元函数并不是类的成员函数 无法通过this指针访问数据）  
语法：  
.h 类中声明：friend 数据类型 函数名(类名 类对象);  
.cpp全局中定义：数据类型 函数名(类名 类对象)  
传入时传入实例化后的对象名即可  
类型& 参数名  
这这种方式可以读可改成成员  
const 类型 & 参数名  
这种方式比较适用于只读不改，通过引用传递还可以避免不必要的拷贝，并且可以传常量引用和普通引用  
类型 参数名  
不推荐，按值传递，会有拷贝  
注意：允许传多个参数，根据需求来定，但是至少得有目标对象参数才有意义  
友元是一个特殊的全局函数，该全局函数需要在想要做朋友的类中进行友元声明（前面加上 friend）  
该全局函数就可以在内部访问到对应类对象的私有或保护的成员  
然而一定记住需要将类对象参数的形式传递进去，因为在内部无法通过 this 去访问成员
 
.h

|   |
|---|
|#pragma once  <br>class test  <br>{  <br>private:  <br>int i = 10;  <br>void test1();<br><br>  <br><br>friend void friend1(test& t);  <br>};|

.cpp

|   |
|---|
|#include "test.h"  <br>#include\<iostream\>  <br>using namespace std;  <br>void test::test1()  <br>{  <br>cout \<\< "good" \<\< '\n';  <br>}  <br>void friend1(test& t)  <br>{  <br>cout\<\<t.i\<\<endl;  <br>t.test1();  <br>}  <br>int main()  <br>{  <br>test t;  <br>friend1(t);  <br>}|