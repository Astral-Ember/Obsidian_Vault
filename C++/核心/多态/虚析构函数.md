虚析构函数

1. 虚析构函数的作用
2. 举例说明
3. 栈上的调用情况
4. 总结：

在 C++ 的多态中，虚析构函数是极其重要的概念  
用于确保通过父类指针删除子类对象时，能够正确调用子类的析构函数，避免资源泄漏或行为未定义
 
说人话：  
如果用父类指针装载子类指针对象  
在对父类指针容器进行释放时，如果父类析构函数不是虚函数  
会导致无法调用子类析构函数，造成内存泄漏等问题

|   |   |   |
|---|---|---|
|#pragma once  <br>#include\<iostream\>  <br>using namespace std;  <br>class Father  <br>{  <br>public:  <br>virtual ~Father()  <br>{  <br>cout \<\< "父亲的析构" \<\< endl;  <br>}  <br>};|#pragma once  <br>#include "Father.h"  <br>class Son :  <br>public Father  <br>{  <br>public:  <br>~Son()  <br>{  <br>cout \<\< "儿子的析构" \<\< '\n';  <br>}  <br>};|#include "Son.h"  <br>#include "Father.h"  <br>#include\<iostream\>  <br>using namespace std;  <br>int main()  <br>{  <br>Father* f = new Son();  <br>delete f;f = nullptr;  <br>}|

如果没有virtual关键字，就只会执行Father的析构函数，而不会执行Son的虚构函数  
加上后会先执行Son的虚构函数 再执行Father的析构函数  
p.s.如果存在多层继承关系或多重继承 那么只需要将最上层的析构函数设置为虚函数即可  
由于存在切片的情况，不会存在子类析构不调用的情况，同时父类析构反而会调用两次  
当存在继承关系时，都建议使用虚析构函数  
因为我们无法保证不会使用指针（堆上）的里氏替换来释放对象